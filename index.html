<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligent Plant Disease Detector</title>
    <link rel="stylesheet" href="plant-ui.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>

<header>
    <h1> Plant Disease Care System</h1>
</header>

<nav>
    <button class="nav-button active" data-page="home">Home</button>
    <button class="nav-button" data-page="detection">Detection</button>
    <button class="nav-button" data-page="remedy">Remedy Guide</button>
    <button class="nav-button" data-page="advancements">Advancements</button>
</nav>

<main>

    <!-- HOME PAGE -->
    <section id="page-home" class="page-content active">
        <h2>Welcome to Your Plant Health Assistant</h2>
        <p>A smart solution for quick identification and actionable cures.</p>
        <button class="cta-button" data-page="detection">Start Detection Now</button>

        <h3>Common Diseases We Detect</h3>
        <div class="carousel-container">
            <div class="scene-container small-scene">
                <div class="card-3d">
                    <div class="card-face card-front plant-disease-front">
                        <i class="fas fa-bug fa-4x disease-icon blight-color"></i>
                        <h4>Tomato Early Blight</h4>
                        <p>Hover to see the recommended cure.</p>
                    </div>
                    <div class="card-face card-back plant-disease-back">
                        <h4>Cure: Fungicide & Removal</h4>
                        <p>Apply <i>Copper-based fungicide</i> and remove infected leaves immediately.</p>
                    </div>
                </div>
            </div>

            <div class="scene-container small-scene">
                <div class="card-3d">
                    <div class="card-face card-front plant-disease-front">
                        <i class="fas fa-cloud-showers-heavy fa-4x disease-icon lateblight-color"></i>
                        <h4>Potato Late Blight</h4>
                        <p>Hover to see the recommended cure.</p>
                    </div>
                    <div class="card-face card-back plant-disease-back">
                        <h4>Cure: Systemic Treatment</h4>
                        <p>Use <i>Systemic fungicides</i> and ensure plants have good air circulation.</p>
                    </div>
                </div>
            </div>

            <div class="scene-container small-scene">
                <div class="card-3d">
                    <div class="card-face card-front plant-disease-front">
                        <i class="fas fa-burn fa-4x disease-icon blotch-color"></i>
                        <h4>Grape Leaf Blotch</h4>
                        <p>Hover to see the recommended cure.</p>
                    </div>
                    <div class="card-face card-back plant-disease-back">
                        <h4>Cure: Sanitation & Pruning</h4>
                        <p><i>Prune affected areas</i> and clear debris to prevent overwintering spores.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="contact-box">
            <p>Have doubts or suggestions? We are here to help.</p>
            <p class="contact-details">
                <i class="fas fa-envelope"></i> 221030116@juitsolan.in
            </p>
            <p>For <i>FAQs</i> or <i>new feature recommendations</i>, please use the email above.</p>
        </div>
    </section>

    <!-- DETECTION PAGE -->
    <section id="page-detection" class="page-content hidden">
        <h2>1. Image Analyzer <i class="fas fa-leaf rotate-leaf"></i></h2>
        <p>Upload a clear image of the affected plant leaf for diagnosis.</p>

        <section id="upload-section">
            <label for="image-upload" class="upload-label">
                <i class="fas fa-camera"></i> Select Image
            </label>

            <!-- FIXED: sends image to backend -->
            <input type="file" id="image-upload" accept="image/*" hidden onchange="sendImageToBackend(this)"> 

            <div id="image-preview" class="preview-box">
                <p>No image selected yet.</p>
                <img id="result-img" style="max-width:100%; display:none;">
            </div>
        </section>

        <section id="results-section" class="hidden result-card">
            <h3>Analysis Summary</h3>
            <div id="result-content">
                <p>Disease: <strong id="disease-name">---</strong></p>
                <p>Confidence: <span id="confidence">---</span></p>
                <p>Remedy Reference: <a href="#" id="remedy-link" data-page="remedy">View Full Guide</a></p>
            </div>
        </section>

        <section id="api-analysis-detail" class="hidden api-detail-card">
            <h3> Detailed API Analysis Output</h3>
            <p>This area will display JSON output from the backend.</p>
        </section>
    </section>

    <!-- REMEDY PAGE -->
    <section id="page-remedy" class="page-content hidden">
        <h2>Remedy Guide & Recommendations</h2>
        <div id="remedy-detail">
            <p class="placeholder-text">Specific remedy information appears here after detection.</p>
        </div>
    </section>

    <!-- ADVANCEMENTS PAGE -->
    <section id="page-advancements" class="page-content hidden">
        <h2> Latest Advancements in Plant Health AI</h2>
        <div class="advancements-grid">
            <div class="advancement-card">
                <i class="fas fa-lightbulb fa-3x advancement-icon"></i>
                <h4>Hyperspectral Imaging</h4>
                <p>Detecting disease days before visible symptoms.</p>
            </div>
            <div class="advancement-card">
                <i class="fas fa-mobile-alt fa-3x advancement-icon"></i>
                <h4>On-Device Mobile AI</h4>
                <p>Instant diagnosis without internet.</p>
            </div>
            <div class="advancement-card">
                <i class="fas fa-project-diagram fa-3x advancement-icon"></i>
                <h4>CNN + Weather Fusion Models</h4>
                <p>Smarter predictions using combined data.</p>
            </div>
        </div>
    </section>

</main>

<!-- BACKEND SCRIPT -->
<script>
const backendURL = "https://your-backend-name.onrender.com/predict"; 
// ðŸ‘† Replace with actual Render backend URL

async function sendImageToBackend(fileInput) {
    const file = fileInput.files[0];
    if (!file) return;

    const formData = new FormData();
    formData.append("file", file);

    // show preview
    const previewURL = URL.createObjectURL(file);
    document.getElementById("result-img").src = previewURL;
    document.getElementById("result-img").style.display = "block";

    const response = await fetch(backendURL, {
        method: "POST",
        body: formData
    });

    if (!response.ok) {
        alert("Error: Unable to reach backend server.");
        return;
    }

    const blob = await response.blob();
    const resultURL = URL.createObjectURL(blob);

    // show backend mask output
    document.getElementById("result-img").src = resultURL;
}
</script>

<script src="detector-logic.js"></script>

</body>
</html>

